import{_ as w,r as p,t as f,v as d,Y as z,G as m,I as x,V as N,C as D,j as b,o as B,x as c,y as h,F as I,E as A,H,Z as T,$ as O,g as q,z as P,A as U,J as G}from"./D2HCay29.js";import{u as M}from"./B2XwIevP.js";const J=["value"],R={__name:"SortFilterButton",props:["value"],emits:["updateFilter"],setup(t,{emit:n}){const a=t,e=p(!1),o=n,i=()=>{e.value=!e.value,o("updateFilter",a.value,e.value)};return(_,s)=>(d(),f("input",{type:"button",class:z([m(e)?"selected":"notSelected"]),value:t.value,onClick:i},null,10,J))}},X=w(R,[["__scopeId","data-v-581d512a"]]),Y={id:"filter-outer-container"},Z={id:"tags-wrapper"},K={__name:"Filter",props:["file"],emits:["updateFilter"],async setup(t,{emit:n}){let a,e;const o=x("filterContainer"),i=x("titleTag"),_=t,s=p([]),l=p(!1),r=N("updateFilter"),{data:v,status:y,error:g}=([a,e]=D(()=>M(`/api/filters/${_.file}`,"$kkDn0hAmM0")),a=await a,e(),a),C=b(()=>v.value.tags.sort()),$=(u,L)=>{if(L)s.value.push(u);else{const F=s.value.indexOf(u);F>-1&&s.value.splice(F,1)}s.value.length!==0?(i.value.classList.add("style-white"),i.value.classList.remove("style-black")):(i.value.classList.add("style-black"),i.value.classList.remove("style-white")),r(v.value.title,s.value)},k={duration:100,easing:"linear",fill:"forwards"},V=()=>{l.value?S(o):E(o)};function E(u){u.value.animate([{maxHeight:u.value.scrollHeight+"px"}],k),l.value=!0}function S(u){u.value.animate([{maxHeight:"0px"}],k),l.value=!1}return B(()=>{window.addEventListener("resize",()=>{l.value&&S(o)})}),(u,L)=>{const F=X;return d(),f("div",Y,[c("div",{ref_key:"titleTag",ref:i,id:"title",class:"style-black",onClick:V},h(m(v).title),513),c("div",{id:"filter-container",ref_key:"filterContainer",ref:o},[c("div",Z,[(d(!0),f(I,null,A(m(C),j=>(d(),H(F,{value:j,onUpdateFilter:$},null,8,["value"]))),256))])],512)])}}},de=w(K,[["__scopeId","data-v-3b725465"]]),ue={__name:"SortFilter",emits:["updateSort","updateFilter"],setup(t,{emit:n}){const a=n,e=p({}),o=p(""),i=s=>{o.value=s,a("updateSort",s)},_=(s,l)=>{e.value[s]=l,a("updateFilter",e.value)};return T("updateSort",i),T("updateFilter",_),(s,l)=>O(s.$slots,"default")}},Q={id:"card-image-container"},W=["src"],ee={id:"card-info"},te={class:"card-title"},ae={class:"card-description"},se={class:"card-tags"},re={__name:"Card",props:["card","category"],setup(t){const n=t,a=p(`/images/${n.card.image}.png`),e=p(!0),o=x("cardContainer"),i=x("cardDate"),_={root:null,rootMargin:"0px",threshold:.3};return B(()=>{new IntersectionObserver($=>{$.forEach(k=>{k.isIntersecting?e.value=!0:e.value=!1})},_).observe(o.value);let l=new Date(n.card.date),r=new Date,v=r.getHours()*60*60*1e3,y=r.getMinutes()*60*1e3,g=r.getSeconds()*1e3;r=r-(v+y+g);let C=Math.abs(l-r)/(1e3*60*60*24);l>=r&&C<7&&(o.value.classList.add("animation-now"),i.value.classList.add("date-now"))}),(s,l)=>{const r=q("router-link");return d(),f("div",{ref_key:"cardContainer",ref:o,class:"card-container card"},[P(r,{to:{name:`${t.category}-id`,params:{id:t.card.id}},class:"card-link"},{default:U(()=>[c("div",Q,[m(e)?(d(),f("img",{key:0,id:"card-image",src:m(a),alt:"Card Image"},null,8,W)):G("",!0)]),c("div",ee,[c("div",te,h(t.card.title),1),c("div",ae,h(t.card.description),1),c("div",{class:"card-date",ref_key:"cardDate",ref:i},h(t.card.date),513),c("div",se,h(t.card.tags),1)])]),_:1},8,["to"])],512)}}},ne=w(re,[["__scopeId","data-v-0a5b770a"]]);function oe(t,n){return t.filter(a=>n.every(e=>a.tags.includes(e)))}const ie={class:"card-gallery"},_e={__name:"CardList",props:{file:{type:String,required:!0},order:{type:String,default:"newest"},beforeToday:{type:Boolean,default:!1},filterTags:{type:Array,default:()=>[]}},async setup(t){let n,a;const e=t,o=b(()=>`/api/dated/${e.file}?order=${e.order}&beforeToday=${e.beforeToday}`),{data:i,status:_,error:s}=([n,a]=D(()=>M(o,{default:()=>[]},"$P4VXlh8Pvq")),n=await n,a(),n),l=b(()=>{let r=i.value||[];return e.filterTags.length?oe(r,e.filterTags):r});return(r,v)=>{const y=ne;return d(),f("div",ie,[(d(!0),f(I,null,A(m(l),g=>(d(),H(y,{key:g,card:g,category:e.file},null,8,["card","category"]))),128))])}}};export{ue as _,_e as a,de as b};

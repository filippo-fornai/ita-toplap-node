import{_ as w,r as p,t as f,v as d,W as z,G as m,I as F,T as N,C as D,j as b,o as B,x as c,y as h,F as I,E as A,H,X as T,Y as O,m as R,g as U,z as q,A as P,J as X}from"./D2QMpIAr.js";import{u as M}from"./1zgirwCW.js";const G=["value"],J={__name:"SortFilterButton",props:["value"],emits:["updateFilter"],setup(t,{emit:n}){const a=t,e=p(!1),o=n,i=()=>{e.value=!e.value,o("updateFilter",a.value,e.value)};return(_,s)=>(d(),f("input",{type:"button",class:z([m(e)?"selected":"notSelected"]),value:t.value,onClick:i},null,10,G))}},W=w(J,[["__scopeId","data-v-581d512a"]]),Y={id:"filter-outer-container"},K={id:"tags-wrapper"},Q={__name:"Filter",props:["file"],emits:["updateFilter"],async setup(t,{emit:n}){let a,e;const o=F("filterContainer"),i=F("titleTag"),_=t,s=p([]),l=p(!1),r=N("updateFilter"),{data:v,status:y,error:g}=([a,e]=D(()=>M(`/api/filters/${_.file}`,"$kkDn0hAmM0")),a=await a,e(),a),x=b(()=>v.value.tags.sort()),$=(u,L)=>{if(L)s.value.push(u);else{const C=s.value.indexOf(u);C>-1&&s.value.splice(C,1)}s.value.length!==0?(i.value.classList.add("style-white"),i.value.classList.remove("style-black")):(i.value.classList.add("style-black"),i.value.classList.remove("style-white")),r(v.value.title,s.value)},k={duration:100,easing:"linear",fill:"forwards"},E=()=>{l.value?S(o):V(o)};function V(u){u.value.animate([{maxHeight:u.value.scrollHeight+"px"}],k),l.value=!0}function S(u){u.value.animate([{maxHeight:"0px"}],k),l.value=!1}return B(()=>{window.addEventListener("resize",()=>{l.value&&S(o)})}),(u,L)=>{const C=W;return d(),f("div",Y,[c("div",{ref_key:"titleTag",ref:i,id:"title",class:"style-black",onClick:E},h(m(v).title),513),c("div",{id:"filter-container",ref_key:"filterContainer",ref:o},[c("div",K,[(d(!0),f(I,null,A(m(x),j=>(d(),H(C,{value:j,onUpdateFilter:$},null,8,["value"]))),256))])],512)])}}},ue=w(Q,[["__scopeId","data-v-3b725465"]]),_e={__name:"SortFilter",emits:["updateSort","updateFilter"],setup(t,{emit:n}){const a=n,e=p({}),o=p(""),i=s=>{o.value=s,a("updateSort",s)},_=(s,l)=>{e.value[s]=l,a("updateFilter",e.value)};return T("updateSort",i),T("updateFilter",_),(s,l)=>O(s.$slots,"default")}},Z={id:"card-image-container"},ee=["src"],te={id:"card-info"},ae={class:"card-title"},se={class:"card-description"},re={class:"card-tags"},ne={__name:"Card",props:["card","category"],setup(t){const n=t,a=p(`${R().app.baseURL}images/${n.card.image}.png`),e=p(!0),o=F("cardContainer"),i=F("cardDate"),_={root:null,rootMargin:"0px",threshold:.3};return B(()=>{new IntersectionObserver($=>{$.forEach(k=>{k.isIntersecting?e.value=!0:e.value=!1})},_).observe(o.value);let l=new Date(n.card.date),r=new Date,v=r.getHours()*60*60*1e3,y=r.getMinutes()*60*1e3,g=r.getSeconds()*1e3;r=r-(v+y+g);let x=Math.abs(l-r)/(1e3*60*60*24);l>=r&&x<7&&(o.value.classList.add("animation-now"),i.value.classList.add("date-now"))}),(s,l)=>{const r=U("router-link");return d(),f("div",{ref_key:"cardContainer",ref:o,class:"card-container card"},[q(r,{to:{name:`${t.category}-id`,params:{id:t.card.id}},class:"card-link"},{default:P(()=>[c("div",Z,[m(e)?(d(),f("img",{key:0,id:"card-image",src:m(a),alt:"Card Image"},null,8,ee)):X("",!0)]),c("div",te,[c("div",ae,h(t.card.title),1),c("div",se,h(t.card.description),1),c("div",{class:"card-date",ref_key:"cardDate",ref:i},h(t.card.date),513),c("div",re,h(t.card.tags),1)])]),_:1},8,["to"])],512)}}},oe=w(ne,[["__scopeId","data-v-ec66f92e"]]);function ie(t,n){return t.filter(a=>n.every(e=>a.tags.includes(e)))}const le={class:"card-gallery"},pe={__name:"CardList",props:{file:{type:String,required:!0},order:{type:String,default:"newest"},beforeToday:{type:Boolean,default:!1},filterTags:{type:Array,default:()=>[]}},async setup(t){let n,a;const e=t,o=b(()=>`/api/dated/${e.file}?order=${e.order}&beforeToday=${e.beforeToday}`),{data:i,status:_,error:s}=([n,a]=D(()=>M(o,{default:()=>[]},"$P4VXlh8Pvq")),n=await n,a(),n),l=b(()=>{let r=i.value||[];return e.filterTags.length?ie(r,e.filterTags):r});return(r,v)=>{const y=oe;return d(),f("div",le,[(d(!0),f(I,null,A(m(l),g=>(d(),H(y,{key:g,card:g,category:e.file},null,8,["card","category"]))),128))])}}};export{_e as _,pe as a,ue as b};
